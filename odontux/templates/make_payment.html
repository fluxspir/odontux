{% extends "summary_patient.html" %}
{% block main %}
{% from "_formhelpers.html" import render_field, render_field_js_onchange %}
<h3>Make payment</h3>
<form method="post" action="{{ url_for('make_payment', 
                              patient_id=patient.id, 
                              appointment_id=appointment.id) }}">

  {{ payment_form.patient_id }}
  {{ payment_form.mean_id }}<br />
  {{ payment_form.amount }}<br />
  {{ payment_form.comments }}<br />
  {{ payment_form.make_payment }}

</form>

{#
<script type='text/javascript'>

function UpdateGesture() {

  var cotations = {{ cotations|tojson }};
  var healthcare_plan_value = document.getElementById('healthcare_plan_id').value;
  var healthcare_plan_list = cotations[healthcare_plan_value];

  var gesture = document.getElementById('gesture_id');

  gesture.options.length = 0;
  for (i = 1 ; i <= Object.keys(healthcare_plan_list).length; i++) {
    gesture.options[i]=new Option(healthcare_plan_list[i][0], i)
  }

  
}

function UpdateCodePrice() {

  var cotations = {{ cotations|tojson }};
  
  var healthcare_plan_value = document.getElementById('healthcare_plan_id').value;
  var gesture_value = document.getElementById('gesture_id').value;

  var code = document.getElementById('code');
  var price = document.getElementById('price');

  code.value = cotations[healthcare_plan_value][gesture_value][1];
  price.value = cotations[healthcare_plan_value][gesture_value][2];

}
</script>
#}
{% endblock %}
