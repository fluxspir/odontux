{% macro date_choice() %}
  {% from "_formhelpers.html" import render_simple_field_line %}
    <br />
        <a href="{{ url_for('display_day', dateday=prevday, 
                                          dentist_id=dentist_id, 
                                          dental_unit_id=dental_unit_id) }}">
          Previous Day</a>

        <form class="inline" method="post" 
                            action="{{ url_for('agenda_date', 
                                    dateday=summary_agenda_form.day.data, 
                                    dentist_id=summary_agenda_form.dentist_id.data, 
                                    dental_unit_id=summary_agenda_form.dental_unit_id.data) }}">
          {{ render_simple_field_line( summary_agenda_form.day ) }}
          {{ isoweekday }}
          {{ render_simple_field_line( summary_agenda_form.dentist_id ) }}
          {{ render_simple_field_line( summary_agenda_form.dental_unit_id) }}
          <input type="submit" value="Go" />
        </form>

        <a href="{{ url_for('display_day', dateday=nextday, 
                                          dentist_id=dentist_id, 
                                          dental_unit_id=dental_unit_id) }}">
          Next Day</a>
{% endmacro %}


{% extends "summary_agenda.html" %}

{% block main %}

      {{ date_choice() }}<br />
    <center><h2><a href="{{ url_for('add_appointment') }}">
          Add new appointment</a></h2></center><br />


{#
  {% if meetings %}
      <br />
      <br />
    <table border=1>
      <caption>
        Appointments on {{ summary_agenda_form.day.data }}
      </caption>
      <tr>
        <th></th>
        <th>Time</th>
        <th>Duration</th>
        <th>Name</th>
        <th>Reason</th>
        <th></th>
      </tr>
    {% for meeting in meetings %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ meeting.starttime.time() }}</td>
        <td>{{ meeting.endtime - meeting.starttime }}</td>
        
        {% if meeting.appointment %}
          <td>{{ meeting.appointment.patient.lastname }} 
              {{ meeting.appointment.patient.firstname }}
          </td>
          <td>{{ meeting.appointment.reason }}</td>
          <td>
            <form method="post" action="{{ url_for('enter_patient_appointment') }}">
              <input type="hidden" name="patient_id" value={{ meeting.appointment.patient_id }} />
              <input type="hidden" name="appointment_id" value={{ meeting.appointment.id }} />
              <input type="submit" value="Go" />
            </form>
          </td>
        {% else %}
          <td>New patient : {{ meeting.comment }}</td>
          <td> </td>
          <td> </td>
        {% endif %}

      </tr>
    {% endfor %}
    </table>
  
  
  {% else %}
    No appointment on  {{ dateday }}
  {% endif %}
#}
{% endblock %}
