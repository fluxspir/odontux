{% macro date_choice() %}
  {% from "_formhelpers.html" import render_simple_field_line %}
        <a href="{{ url_for('display_day', dateday=prevday, dentist_id=dentist_id) }}">Previous Day</a>
        <form class="inline" method="post" action="{{ url_for('agenda_date', dateday=summary_agenda_form.day.data, dentist_id=summary_agenda_form.dentist_id.data) }}">
          {{ render_simple_field_line( summary_agenda_form.day ) }}
          {{ render_simple_field_line( summary_agenda_form.dentist_id ) }}
          <input type="submit" value="Go" />
        </form>
        <a href="{{ url_for('display_day', dateday=nextday, dentist_id=dentist_id) }}">Next Day</a>
{% endmacro %}


{% extends "summary_agenda.html" %}

{% block main %}

  {% if appointments %}
    <table border=1>
      <caption>
      {{ date_choice() }}
      </caption>
      <tr>
        <th></th>
        <th>Time</th>
        <th>Duration</th>
        <th>Name</th>
        <th>Reason</th>
        <th></th>
      </tr>
    {% for patient,appointment in appointments %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ appointment.agenda.starttime.time() }}</td>
        <td>{{ appointment.agenda.endtime - appointment.agenda.starttime }}</td>
        <td>{{ patient.lastname }} {{ patient.firstname }}</td>
        <td>{{ appointment.reason }}</td>
        <td>
          <form method="post" action="{{ url_for('enter_patient_appointment') }}">
            <input type="hidden" name="patient_id" value={{ patient.id }} />
            <input type="hidden" name="appointment_id" value={{ appointment.id }} />
            <input type="submit" value="Go" />
          </form>
        </td>
      </tr>
    {% endfor %}
    </table>
  
  
  {% else %}
    {{ date_choice() }}
  {% endif %}
{% endblock %}
